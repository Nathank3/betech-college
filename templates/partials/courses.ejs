<section id="courses" class="py-24 px-6 max-w-7xl mx-auto">
    <div class="mb-20 text-center">
        <h2 class="text-4xl md:text-5xl serif font-bold mb-4">World-Class <span class="neon-text">Curriculum</span></h2>
        <p class="text-gray-500 uppercase tracking-[0.3em] text-sm font-semibold">
            Empowering the next generation of tech leaders
        </p>
    </div>

    <% Object.keys(categories).forEach(categoryName => { %>
        <div class="mb-20">
            <div class="flex items-center gap-4 mb-10">
                <h3 class="text-2xl serif font-bold whitespace-nowrap"><%= categoryName %></h3>
                <div class="h-[1px] w-full bg-gradient-to-r from-neon-text/50 to-transparent"></div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="category-<%= categoryName.replace(/\s+/g, '-') %>">
                <% categories[categoryName].forEach((course, index) => { %>
                    <div class="glow-card group relative <%= index >= 3 ? 'hidden overflow-course' : '' %>">
                        <div class="absolute -inset-0.5 bg-neon-text opacity-0 group-hover:opacity-20 blur transition-all duration-500 rounded-2xl"></div>
                        <div class="glass overflow-hidden flex flex-col h-full rounded-2xl border border-white/5 group-hover:border-neon-text/50 transition-all duration-500 relative bg-black/40">
                            <div class="relative h-56 overflow-hidden">
                                <img
                                    src="<%= course.image %>"
                                    alt="<%= course.title %>"
                                    class="w-full h-full object-cover group-hover:scale-110 transition duration-700"
                                >
                                <div class="absolute top-4 right-4 px-3 py-1 bg-black/80 text-neon-text text-[10px] font-black uppercase tracking-widest border border-neon-text/30 backdrop-blur-md rounded-full">
                                    <%= course.tag %>
                                </div>
                            </div>
                            <div class="p-8 flex-grow flex flex-col">
                                <h4 class="text-xl serif font-bold mb-3 group-hover:text-neon-text transition-colors">
                                    <%= course.title %>
                                </h4>
                                <p class="text-gray-500 text-sm mb-6 leading-relaxed line-clamp-3">
                                    <%= course.description %>
                                </p>
                                <div class="mt-auto pt-6 border-t border-white/5 flex justify-between items-center">
                                    <button 
                                        onclick="openCourseModal('<%= course.title %>', '<%= course.description %>', '<%= course.tag %>')"
                                        class="text-xs font-bold uppercase tracking-widest text-gray-400 group-hover:text-neon-text transition-colors inline-flex items-center gap-2"
                                    >
                                        View Details
                                        <span class="translate-x-0 group-hover:translate-x-1 transition-transform">â†’</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>

            <% if (categories[categoryName].length > 3) { %>
                <div class="mt-10 text-center">
                    <button 
                        onclick="toggleCourses(this, 'category-<%= categoryName.replace(/\s+/g, '-') %>')"
                        class="px-6 py-2 border border-neon-text/30 text-neon-text text-xs font-bold uppercase tracking-widest hover:bg-neon-text hover:text-black transition-all duration-300"
                    >
                        View All <%= categoryName %>
                    </button>
                </div>
            <% } %>
        </div>
    <% }); %>

    <script>
        function toggleCourses(btn, containerId) {
            const container = document.getElementById(containerId);
            const hiddenCourses = container.querySelectorAll('.overflow-course');
            const isShowingAll = btn.innerText.includes('View Less');

            hiddenCourses.forEach(course => {
                if (isShowingAll) {
                    course.classList.add('hidden');
                } else {
                    course.classList.remove('hidden');
                }
            });

            if (isShowingAll) {
                btn.innerText = btn.getAttribute('data-original-text');
            } else {
                if (!btn.getAttribute('data-original-text')) {
                    btn.setAttribute('data-original-text', btn.innerText);
                }
                btn.innerText = 'View Less';
            }
        }
    </script>

    <!-- View All Courses Button -->
    <div class="mt-8 text-center">
        <a
            href="https://wa.me/+254711514558?text=Hi,%20I'd%20like%20to%20know%20more%20about%20your%20full%20course%20list"
            target="_blank"
            class="inline-block px-10 py-4 border-2 border-neon-text text-neon-text font-bold text-lg hover:bg-neon-text hover:text-black transition duration-500 shadow-[0_0_20px_rgba(0,242,255,0.1)] hover:shadow-[0_0_30px_rgba(0,242,255,0.3)]"
        >
            Explore Full Prospectus
        </a>
    </div>
</section>
